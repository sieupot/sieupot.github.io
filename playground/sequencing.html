<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title>Secven»õiere</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="manifest" href="/site.webmanifest">
  <link rel="apple-touch-icon" href="/icon.png">

  <link rel="stylesheet" href="../css/normalize.css">
  <link rel="stylesheet" href="../css/main.css">
  <link rel="stylesheet" href="../css/pageLayout.css">
  <link rel="stylesheet" href="../css/sequencing.css">

  <meta name="theme-color" content="#EFE7E0">

  <script defer src="../js/lib/modernizr-3.8.0.min.js"></script>
  <script defer src="../js/lib/jquery.min.js"></script>
  <script defer src="../js/lib/jquery-ui-1.12.1.min.js"></script>

  <script defer src="../js/activityEngine.js"></script>
  <script defer src="../js/actions.js"></script>
  <!-- inject the template footer into the page -->
  <script defer src="../js/footerInjector.js"></script>
  <script type="text/javascript">
    const imgPath = "../images/actions/";
    const sndPath = "../sounds/actions/";

    class SoundItem {
      soundPath;

      /**
       *
       * @param soundBaseFileName
       * @param soundArticle: Indefinite, Definite, Possessive
       * @param sharedSound: some sounds are shared by the spatial positioning activities
       */
      constructor(soundBaseFileName, soundArticle = '', sharedSound = false) {
        this.soundPath = `${sharedSound ? sndCommonPath : sndPath}${soundBaseFileName}${soundArticle}.ogg`;
      }
    }

    function initActivityItems(){
      activityItems = [];

      // BOY CLAPS HANDS
      let boyClapsHands = {};
      boyClapsHands.name = 'boyClapsHands';
      boyClapsHands.images = [imgPath + "boyClapsHands.jpg"];
      boyClapsHands.soundItems = [boyArtDSoundItem.soundPath, clapsSoundItem.soundPath, fromSoundItem.soundPath, palmsISoundItem.soundPath];
      activityItems.push(boyClapsHands);
      // GIRL CLAPS HANDS
      let girlClapsHands = {};
      girlClapsHands.name = 'girlClapsHands';
      girlClapsHands.images = [imgPath + "girlClapsHands.jpg"];
      girlClapsHands.soundItems = [girlArtDSoundItem.soundPath, clapsSoundItem.soundPath, fromSoundItem.soundPath, palmsISoundItem.soundPath];
      activityItems.push(girlClapsHands);
    }
  </script>

  <script>
    function allowDrop(ev) {
      ev.preventDefault();
    }

    function startDrag(ev) {
      const draggableElem = document.getElementById(ev.target.id);
      if (draggableElem.getAttribute('draggable')) {
        draggableElem.classList.add('hide-src-while-dragging');
        ev.dataTransfer.setData('text', ev.target.id);
      }
    }
    function endDrag(ev) {
      document.getElementById(ev.target.id).classList.remove('hide-src-while-dragging');
    }

    function drop(ev, el) {
      ev.preventDefault();
      const draggableElemId = ev.dataTransfer.getData('text');
      const draggableElem = document.getElementById(draggableElemId);
      if (draggableElem && draggableElem.getAttribute('draggable')) {
        el.appendChild(draggableElem);
        // don't allow source to be draggable anymore
        removeAttributes(draggableElem, 'draggable');
        draggableElem.style.cursor = 'default';
        draggableElem.classList.remove('hide-src-while-dragging');
        // don't allow occupied target to allow dropping anymore
        removeAttributes(ev.target, 'ondrop', 'ondragover', 'ondragenter', 'onmouseout', 'ondragleave');
        ev.target.style.backgroundColor = "";
      }
    }

    function HighlightArea(ev, id, isTrue) {
      if (ev.dataTransfer) {
        const dropElem = document.getElementById(id);
        const draggableElem = document.getElementById(ev.dataTransfer.getData('text'));
        if (dropElem && draggableElem) {
          isTrue && draggableElem.hasAttribute('draggable') ? dropElem.style.backgroundColor = 'yellow' :
            dropElem.style.backgroundColor = "";
        }
      }
    }

    function removeAttributes(element, ...attrs) {
      attrs.forEach(attr => element.removeAttribute(attr))
    }
  </script>
</head>

<body>
  <div id="content">
    <!--<div id="dialogDiv"></div>
    <div class="result">
      <img src="../images/start.svg" alt="result image" onclick="startActivity();" style="height: 100%;" class="pointerCursor"/>
    </div>-->

    <div id="contentPanel">
      <div class="items-container">
        <div id="droppable1" class="activity-item"
             ondrop="drop(event, this)"
             ondragover="allowDrop(event)"
             ondragenter="HighlightArea(event, this.id, true)"
             onmouseout="HighlightArea(event, this.id, false)"
             ondragleave="HighlightArea(event, this.id, false)">
          <div class="index-nb" ondragover="allowDrop(event)">1</div>
        </div>
        <div id="droppable2" class="activity-item"
             ondrop="drop(event, this)"
             ondragover="allowDrop(event)"
             ondragenter="HighlightArea(event, this.id, true)"
             onmouseout="HighlightArea(event, this.id, false)"
             ondragleave="HighlightArea(event, this.id, false)">
          <div class="index-nb" ondragover="allowDrop(event)">2</div>
        </div>
        <div id="droppable3" class="activity-item"
             ondrop="drop(event, this)"
             ondragover="allowDrop(event)"
             ondragenter="HighlightArea(event, this.id, true)"
             onmouseout="HighlightArea(event, this.id, false)"
             ondragleave="HighlightArea(event, this.id, false)">
          <div class="index-nb" ondragover="allowDrop(event)">3</div>
        </div>
      </div>

      <div class="separator">
      </div>

      <div class="items-container">
        <div id="draggable1" class="draggable-container">
          <div id="drag1" class="drag-item" style="background-image: url('../images/smileFace.png');" draggable="true" ondragstart="startDrag(event)" ondragend="endDrag(event);">
          </div>
        </div>
        <div id="draggable2" class="draggable-container">
          <div id="drag2" class="drag-item" style="background-image: url('../images/sadFace.png');" draggable="true" ondragstart="startDrag(event)" ondragend="endDrag(event);">
          </div>
        </div>
        <div id="draggable3" class="draggable-container">
          <div id="drag3" class="drag-item" style="background-image: url('../images/app/chidlren.png');" draggable="true" ondragstart="startDrag(event)" ondragend="endDrag(event);">
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="scorePanel">
    <div id="scoreGood">
      <img src="../images/smileFace.png" alt="good answers" style="height: 25px;"/>
      <div>0</div>
    </div>
    <div id="scoreBad">
      <img src="../images/sadFace.png" alt="bad answers" style="height: 25px;"/>
      <div>0</div>
    </div>
  </div>
</body>

</html>
